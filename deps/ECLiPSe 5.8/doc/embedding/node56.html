<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!--Converted with LaTeX2HTML 98.2 beta5 (July 28th, 1998)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Parameters for Initialising an ECLiPSe engine</TITLE>
<META NAME="description" CONTENT="Parameters for Initialising an ECLiPSe engine">
<META NAME="keywords" CONTENT="embroot">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<LINK REL="STYLESHEET" HREF="embroot.css">
<LINK REL="next" HREF="node57.html">
<LINK REL="previous" HREF="node49.html">
<LINK REL="up" HREF="embroot.html">
<LINK REL="next" HREF="node57.html">
</HEAD>
<BODY >
<!--Navigation Panel-->
<A NAME="tex2html1567"
 HREF="node57.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next_motif.gif"></A> 
<A NAME="tex2html1563"
 HREF="embroot.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up_motif.gif"></A> 
<A NAME="tex2html1557"
 HREF="node55.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="previous_motif.gif"></A>  
<A NAME="tex2html1565"
 HREF="node76.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index_motif.gif"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html1568"
 HREF="node57.html">Summary of C++ Interface</A>
<B> Up:</B> <A NAME="tex2html1564"
 HREF="embroot.html">ECLiPSe Embedding and Interfacing</A>
<B> Previous:</B> <A NAME="tex2html1558"
 HREF="node55.html">Support for the Remote</A>
 &nbsp <B>  <A NAME="tex2html1566"
 HREF="node76.html">Index</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION001100000000000000000">
Parameters for Initialising an ECLiPSe engine</A>
</H1>

<P>
<A NAME="chapecoptions"></A>It is possible to parametrise the initialisation of the ECLiPSe
engine by calling the functions ec_set_option_int() and ec_set_option_ptr().
This must be done before initialisation.

<P>
<DL>
<DT><STRONG>Installation directory</STRONG>
<DD> 
<BR>
<PRE>
	ec_set_option_ptr(EC_OPTION_ECLIPSEDIR, "/usr/tom/eclipse");
</PRE>
This can be used to tell an embedded ECLiPSe where to find it support files.
The default setting is NULL, which means that the location is
taken from the registry entry or from the ECLIPSEDIR environment variable.

<P>
<DT><STRONG>Stack Memory Allocation</STRONG>
<DD> 
<BR>
<PRE>
	ec_set_option_int(EC_OPTION_LOCALSIZE, 128*1024*1024);
	ec_set_option_int(EC_OPTION_GLOBALSIZE, 128*1024*1024);
</PRE>
The sizes in bytes of the stacks can be varied. They will be rounded to
system specific pagesizes. On machines where initially only virtual memory
is reserved rather than allocating real memory (WindowsNT/95, Solaris) they
default to very large sizes (128MB), where real memory or space in the
operating system swap file is taken immediately (SunOS), their default
is very small (750KB,250KB).

<P>
<DT><STRONG>Heap Memory Allocation</STRONG>
<DD> 
<BR>
<PRE>
	ec_set_option_int(EC_OPTION_PRIVATESIZE, 32*1024*1024);
	ec_set_option_int(EC_OPTION_SHAREDSIZE, 64*1024*1024);
</PRE>
The sizes in bytes of the private and shared heaps. Normally these are
ignored as the heaps grow as required.

<P>
They are used in the parallel ECLiPSe, since there allocation is done
at fixed addresses and in that case these sizes  determine the maximum
amount of memory per heap.

<P>
<DT><STRONG>Panic Function</STRONG>
<DD> 
<BR>
<PRE>
        void my_panic(char * what, char * where);
	...
	ec_set_option_ptr(EC_OPTION_PANIC, my_panic);
</PRE>
When ECLiPSe experiences an unrecoverable error, this function
is called. By default a function that prints the panic message
and exits is called. After such an error, one should not call any
of the functions in this interface.

<P>
<DT><STRONG>Startup Arguments</STRONG>
<DD> 
<BR>
<PRE>
        char *args[] = {"a","b","c"}
	...
	ec_set_option_int(EC_OPTION_ARGC, 3);
	ec_set_option_ptr(EC_OPTION_ARGV, args);
</PRE>
These setting are used to simulate a command line for an embedded
ECLiPSe, or to pass command line information to an embedded
ECLiPSe.  The ECLiPSe built-in predicates (<code>argc/1</code>
and <code>argv/2</code>) can access this information.  This provides
a way of passing some initial data to the ECLiPSe engine.

<P>
<DT><STRONG>Default Module</STRONG>
<DD> 
<BR>
<PRE>
	ec_set_option_ptr(EC_OPTION_DEFAULT_MODULE, "my_module");
</PRE>
The default module is the module in which goals called from the
top-level execute. It is also the module that goals called from C
or C++ execute in. The default setting is "eclipse".

<P>
<DT><STRONG>I/O Initialisation</STRONG>
<DD> 
<BR>
<PRE>
	ec_set_option_int(EC_OPTION_IO, MEMORY_IO);
</PRE>
This option controls whether the default I/O streams of ECLiPSe are
connected to stdin/stdout/stderr or to memory queues.
The default setting of this option is SHARED_IO, which means the
ECLiPSe streams 0,1,2 are connected to stdin/stdout/stderr.
In an embedded application, stdin/stdout/stderr may not be available,
or the host application may want to capture all I/O from ECLiPSe.
In this case, use the MEMORY_IO setting, which creates queue streams
for streams 0,1 and 2. These can then be read and written using
ec_queue_read() and ec_queue_write().

<P>
<DT><STRONG>Parallel system parameters</STRONG>
<DD> 
<BR>
<PRE>
	ec_set_option_int(EC_OPTION_PARALLEL_WORKER, 0);
	ec_set_option_int(EC_OPTION_ALLOCATION, ALLOC_PRE);
	ec_set_option_ptr(EC_OPTION_MAPFILE, NULL);
</PRE>
The above options are set differently in ECLiPSe when it is a
worker in a parallel system. They should not be altered.
</DL>

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html1567"
 HREF="node57.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next_motif.gif"></A> 
<A NAME="tex2html1563"
 HREF="embroot.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up_motif.gif"></A> 
<A NAME="tex2html1557"
 HREF="node55.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="previous_motif.gif"></A>  
<A NAME="tex2html1565"
 HREF="node76.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index_motif.gif"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html1568"
 HREF="node57.html">Summary of C++ Interface</A>
<B> Up:</B> <A NAME="tex2html1564"
 HREF="embroot.html">ECLiPSe Embedding and Interfacing</A>
<B> Previous:</B> <A NAME="tex2html1558"
 HREF="node55.html">Support for the Remote</A>
 &nbsp <B>  <A NAME="tex2html1566"
 HREF="node76.html">Index</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
<I>Warwick Harvey</I>
<BR><I>2005-01-25</I>
</ADDRESS>
</BODY>
</HTML>
