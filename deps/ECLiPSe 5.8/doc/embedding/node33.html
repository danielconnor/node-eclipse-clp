<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!--Converted with LaTeX2HTML 98.2 beta5 (July 28th, 1998)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Differences From the Tcl Embedding Interface</TITLE>
<META NAME="description" CONTENT="Differences From the Tcl Embedding Interface">
<META NAME="keywords" CONTENT="embroot">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<LINK REL="STYLESHEET" HREF="embroot.css">
<LINK REL="previous" HREF="node32.html">
<LINK REL="up" HREF="node24.html">
<LINK REL="next" HREF="node34.html">
</HEAD>
<BODY >
<!--Navigation Panel-->
<A NAME="tex2html1161"
 HREF="node34.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next_motif.gif"></A> 
<A NAME="tex2html1157"
 HREF="node24.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up_motif.gif"></A> 
<A NAME="tex2html1153"
 HREF="node32.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="previous_motif.gif"></A>  
<A NAME="tex2html1159"
 HREF="node76.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index_motif.gif"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html1162"
 HREF="node34.html">Tcl Peer Multitasking Interface</A>
<B> Up:</B> <A NAME="tex2html1158"
 HREF="node24.html">Remote Tcl Interface</A>
<B> Previous:</B> <A NAME="tex2html1154"
 HREF="node32.html">Example</A>
 &nbsp <B>  <A NAME="tex2html1160"
 HREF="node76.html">Index</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION00690000000000000000"></A>
<A NAME="remotediff"></A>
<BR>
Differences From the Tcl Embedding Interface
</H1>

<P>
The remote Tcl interface is designed to be largely compatible with the
embedded Tcl interface, so that a user GUI can be written that allows
either interfaces to be used, while sharing most of the code in both
ECLiPSe and Tcl. An example of this is the Tkeclipse development tools.

<P>
Some remote specific code would need to be written. This includes code to
handle the connection and disconnection of the Tcl and ECLiPSe sides. In
addition, the user may need to provide code to restrict the interaction
within the Tcl/Tk GUI when control is transferred to ECLiPSe. Aside from
this, the rest of the code should be reusable, if the user exercises some
care.

<P>
The supported compatible methods of communicating between Tcl and
ECLiPSe in the two interfaces is via the <B>ec_rpc</B> calls and the use
of the I/O queues. The <B>ec_rpc</B> mechanism should behave the same in
both interfaces. For the queues, there are some differences because the
queues are in-memory queues in the embedded interface, but are socket
channels in the remote interface. This leads to the following differences:

<P>

<UL><LI>Data will not appear on the other side until the queue is
      flushed on the side that is generating the output. To make code
      compatible, output queues should be always flushed.

<P>

<LI>In general, reading data via a blocking socket requires the
      size of the data to be explicitly specified, except when I/O is done
      via the EXDR primitives, where size is implicitly specified. Only
      EXDR format is supported when data is sent from Tcl to ECLiPSe.
      That is, a write handler for a Tcl write channel must write the data
      in EXDR format. For output from the ECLiPSe side, the Tcl read
      handler would be supplied with the length of the output when it is
      invoked, and this information must be used if the Tcl read is not
      done via an EXDR primitive. However, in general it is strongly
      suggested that only EXDR formatted data should be sent via the queues
      in both direction.

<P>

<LI>An I/O operation on the stream may block if there is no 
      handler to consume/produce the data on the other side. If a handler
      is specified via the <I>command</I> argument, then a corresponding
      handler in the Tcl side will be invoked at the correct place when the
      ECLiPSe side produces output or request input.

<P>

<LI>The  channel identifier is not of the form <TT>      ec_queueX</TT>. To make code portable, the name of the channel should be
      obtained from the ECLiPSe stream symbolic name or number via the
      commands <B>ec_streamname_to_channel</B> or <B>      ec_streamnum_to_channel</B>.

<P>

<LI>Asynchronous queues are bi-directional. In the embedding interface,
      there are no asynchronous queues, and <B>ec_async_queue_create</B> is
      aliased to <B>ec_queue_create</B>, and a uni-directional queue is
      created. Thus for compatibility, these queues should only be used
      in one direction. 

</UL>

<P>
In summary, to write code that will work for both the remote and embedded
interfaces, the data should be sent using EXDR format, flush always
performed, and a handler (<I>command</I> argument) provided. The Tcl
channel identifier should not be constructed explicitly.

<P>
However, there may be cases where the two interfaces need to be
distinguished. For example, if the Tcl side is to perform some operations
on the file system for the ECLiPSe side (e.g. selecting a file via a
GUI), then with the remote interface, the two sides might not have access
to the same file systems, and being able to distinguish whether the
interface is remote or embedded allows the user to provide code to handle
this.  

<P>
To obtain information on which interface is being used, use the command:

<P>
<DL>
<DT><STRONG><A NAME="2459"></A>ec_interface_type</STRONG>
<DD> 
<BR>
returns remote for the remote interface, and embedded for the
        embedding interface.
</DL>

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html1161"
 HREF="node34.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next_motif.gif"></A> 
<A NAME="tex2html1157"
 HREF="node24.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up_motif.gif"></A> 
<A NAME="tex2html1153"
 HREF="node32.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="previous_motif.gif"></A>  
<A NAME="tex2html1159"
 HREF="node76.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index_motif.gif"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html1162"
 HREF="node34.html">Tcl Peer Multitasking Interface</A>
<B> Up:</B> <A NAME="tex2html1158"
 HREF="node24.html">Remote Tcl Interface</A>
<B> Previous:</B> <A NAME="tex2html1154"
 HREF="node32.html">Example</A>
 &nbsp <B>  <A NAME="tex2html1160"
 HREF="node76.html">Index</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
<I>Warwick Harvey</I>
<BR><I>2005-01-25</I>
</ADDRESS>
</BODY>
</HTML>
