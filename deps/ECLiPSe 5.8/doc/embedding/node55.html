<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!--Converted with LaTeX2HTML 98.2 beta5 (July 28th, 1998)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Support for the Remote Interface</TITLE>
<META NAME="description" CONTENT="Support for the Remote Interface">
<META NAME="keywords" CONTENT="embroot">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<LINK REL="STYLESHEET" HREF="embroot.css">
<LINK REL="previous" HREF="node54.html">
<LINK REL="up" HREF="node49.html">
<LINK REL="next" HREF="node56.html">
</HEAD>
<BODY >
<!--Navigation Panel-->
<A NAME="tex2html1555"
 HREF="node56.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next_motif.gif"></A> 
<A NAME="tex2html1551"
 HREF="node49.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up_motif.gif"></A> 
<A NAME="tex2html1547"
 HREF="node54.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="previous_motif.gif"></A>  
<A NAME="tex2html1553"
 HREF="node76.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index_motif.gif"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html1556"
 HREF="node56.html">Parameters for Initialising an</A>
<B> Up:</B> <A NAME="tex2html1552"
 HREF="node49.html">The Remote Interface Protocol</A>
<B> Previous:</B> <A NAME="tex2html1548"
 HREF="node54.html">Control Messages</A>
 &nbsp <B>  <A NAME="tex2html1554"
 HREF="node76.html">Index</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION001060000000000000000"></A>
<A NAME="remotesupport"></A>
<BR>
Support for the Remote Interface
</H1>

<P>
ECLiPSe provides the following predicates to support the remote
interface:

<P>
<DL>
<DT><STRONG><A NAME="7092"></A>remote_connect(?Address, ?Peer, ?InitGoal)</STRONG>
<DD>Initiates a remote attachment at address Host/Port. The predicate
will wait for a remote process to establish an attachment according to the
protocol described in section&nbsp;<A HREF="node52.html#remoteattach">10.3</A>. If instantiated, InitGoal
is called after the connection is established to perform any user defined
initialisation on the ECLiPSe side (this can be used for example to
define a disconnection handler that will be called when the two sides
disconnect). The predicate succeeds 
when the attachment is successfully made and the remote side returns
control to the ECLiPSe side. Peer is the name of the control
connection, and is used to identify a particular remote peer (an
ECLiPSe session can have several).

<P>
<DT><STRONG><A NAME="7097"></A>remote_connect_setup(?Address, ?Peer, -Socket)</STRONG>
<DD><TT>remote_connect/2</TT> is implemented by calls to <TT>remote_connect_setup/3</TT> and <TT>remote_connect_accept/6</TT>. These lower
level predicates allow more flexibility in the implementation of the remote
attachment, at the cost of some increased complexity.

<P>
The two predicates must be used together, with <TT>remote_connect_setup/3</TT>
called first. The predicate creates a socket server for remote attachment
at host Host and port Port. <TT>Socket</TT> will be instantiated to the name of
the socket server that is created. When the predicate returns, the remote process
can request the socket connection at Host/Port address (if the request is
issued before <TT>remote_connect_setup/3</TT> is called, the server would
refuse the connection). The remote process will suspend waiting for the
request to be accepted. This will happen when <TT>remote_connect_accept/6</TT>
is called.

<P>
Splitting the attachment into two predicates enables the user to start the
remote program in between. This will allow the user to start the remote
attachment automatically by executing the remote program from within
ECLiPSe with an <A NAME="tex2html436"
 HREF="../bips/kernel/opsys/exec-3.html">exec/3</A><A NAME="7408"></A> call. 

<P>
<DT><STRONG><A NAME="7108"></A>remote_connect_accept(?Peer, +Socket, +TimeOut,?InitGoal,?PassTerm,-InitRes)</STRONG>
<DD>This predicate accepts an remote attachment at the socket server Socket.
This predicate is called after a call to <TT>remote_connect_setup/3</TT>, with the same arguments for Peer
and Socket. The predicate will create the control and rpc connections
according to the protocol described in section&nbsp;<A HREF="node52.html#remoteattach">10.3</A> with a
remote process. <TT>Socket</TT> will be closed if the attachment is
successful. 

<P>
<TT>TimeOut</TT> specifies the amount of time (in seconds) that the predicate
will wait for a remote process to attempt a remote attachment. If no remote
attachment request is made in the specified time, the predicate will
fail. This time is also used for the time-outs on peer queue connections.
To make the predicate block indefinitely waiting for a remote
attachment, the atom <TT>block</TT> can be used for <TT>TimeOut</TT>. 

<P>
<TT>InitGoal</TT> is used to define the optional initialisation on the
ECLiPSe side when the two sides are connected. InitGoal will be called
immediately after connection, before the two sides are allowed to
interact. If no initialisation is desired, then the argument can be left
uninstantiated. The result of executing the goal is returned in <TT>InitRes</TT>, which should be initially left uninstantiated.

<P>
<TT>PassTerm</TT> is the pass-term that is used  to verify the
connection. The remote side sends a pass-term which is checked to see it is
identical to <TT>PassTerm</TT>. If not, the attachment fails.

<P>
Unimplemented functionality error is raised if the remote protocol used by
the remote and ECLiPSe sides are incompatible. This can happen if
one side is outdated (and using an outdated version of the protocol). 

<P>
<DT><STRONG><A NAME="7121"></A>remote_disconnect(+Peer)</STRONG>
<DD>Initiates the disconnection of the remote attachment represented by
Peer. All connections (control, ec_rpc, synchronous and asynchronous
streams) will be closed. The predicate succeeds after the clean up. In
addition, a <TT>Control</TT> event will be raised. 

<P>
<DT><STRONG><A NAME="7123"></A>remote_yield(+Peer)</STRONG>
<DD>Explicitly yield control to the remote side Peer. Execution on
ECLiPSe side will be suspended until the remote side returns control to
ECLiPSe side. The predicate will succeed when remote side returns
control. The predicate will abort if the remote side initiates
disconnect. The abort will occur after the remote attachment is disconnected.
The abort can be caught to allow for more graceful exits in user
applications by wrapping the <TT>remote_yield/1</TT> in a <A NAME="tex2html438"
 HREF="../bips/kernel/control/block-3.html">block/3</A><A NAME="7411"></A> call.

<P>
<DT><STRONG><A NAME="7129"></A>peer_queue_create(+Name,+Peer,+Type,+Direction,+Event)</STRONG>
<DD>Creates a peer queue from ECLiPSe. <TT>Name</TT> is the name for the queue,
and <TT>Peer</TT> is the peer to which the queue would be connected. <TT>Type</TT> specifies if the queue is synchronous or not (atom sync or async),
and direction is the direction of the queue (fromec, toec for synchronous
queues, it is ignored for asynchronous queues), <TT>Event</TT> is the name of
the event that will be raised on the ECLiPSe side. The user should
associate an event handler goal with Event. If no event is to be raised,
then the empty atom (<code>''</code>) should be used.

<P>
The predicate does not provide a way to specify a handler for the queue on
the peer side. This is because it is not possible to provide a generic
way that is independent of peer's programming language.

<P>
<DT><STRONG><A NAME="7136"></A>peer_queue_close(+Name)</STRONG>
<DD>Closes the peer queue Name from ECLiPSe. 

<P>
</DL>

<P>

<HR>
<!--Navigation Panel-->
<A NAME="tex2html1555"
 HREF="node56.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next_motif.gif"></A> 
<A NAME="tex2html1551"
 HREF="node49.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up_motif.gif"></A> 
<A NAME="tex2html1547"
 HREF="node54.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="previous_motif.gif"></A>  
<A NAME="tex2html1553"
 HREF="node76.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index_motif.gif"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html1556"
 HREF="node56.html">Parameters for Initialising an</A>
<B> Up:</B> <A NAME="tex2html1552"
 HREF="node49.html">The Remote Interface Protocol</A>
<B> Previous:</B> <A NAME="tex2html1548"
 HREF="node54.html">Control Messages</A>
 &nbsp <B>  <A NAME="tex2html1554"
 HREF="node76.html">Index</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
<I>Warwick Harvey</I>
<BR><I>2005-01-25</I>
</ADDRESS>
</BODY>
</HTML>
