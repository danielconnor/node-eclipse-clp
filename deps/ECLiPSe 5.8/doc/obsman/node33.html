<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!--Converted with LaTeX2HTML 98.2 beta5 (July 28th, 1998)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Differences between Standalone Eplex and Older Non-Standalone Eplex</TITLE>
<META NAME="description" CONTENT="Differences between Standalone Eplex and Older Non-Standalone Eplex">
<META NAME="keywords" CONTENT="obsman">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<LINK REL="STYLESHEET" HREF="obsman.css">
<LINK REL="previous" HREF="node32.html">
<LINK REL="up" HREF="node32.html">
<LINK REL="next" HREF="node34.html">
</HEAD>
<BODY >
<!--Navigation Panel-->
<A NAME="tex2html822"
 HREF="node34.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next_motif.gif"></A> 
<A NAME="tex2html818"
 HREF="node32.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up_motif.gif"></A> 
<A NAME="tex2html814"
 HREF="node32.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="previous_motif.gif"></A>  
<A NAME="tex2html820"
 HREF="node34.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index_motif.gif"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html823"
 HREF="node34.html">Index</A>
<B> Up:</B> <A NAME="tex2html819"
 HREF="node32.html">Porting to Standalone Eplex</A>
<B> Previous:</B> <A NAME="tex2html815"
 HREF="node32.html">Porting to Standalone Eplex</A>
 &nbsp <B>  <A NAME="tex2html821"
 HREF="node34.html">Index</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION00410000000000000000">
Differences between Standalone Eplex and Older Non-Standalone Eplex</A>
</H1>

<P>
The main difference between the standalone eplex and the non-standalone
eplex is that the standalone version does not use an ECLiPSe
`bounds keeper' like lib(ic) or lib(range) to provide the ranges for the
problem variables. Instead, ranges for variables are treated like another
type of eplex constraint, i.e., they are posted to an eplex instance, and
are stored with the external solver state.

<P>
In the non-standalone eplex, the bounds of <I>all</I> problem variables are
transferred from the bounds keeper to the external solver each time the
solver is invoked, regardless of if the bounds for the variables have
changed or not since the last invocation. This can become very expensive if
a problem has many variables. With the standalone eplex, this overhead is
avoided as the external solver bounds for variables are only updated if
they are explicitly changed. A possible inconvenience is that for hybrid
programming, where eplex is being used with another ECLiPSe solver, any
bound updates due to inferences made by the ECLiPSe solver are not
automatically transferred to the external solver. This can be an advantage
in that it leaves the programmer the freedom of when and how these bound
changes should be transferred to the external solver.

<P>
The main user visible differences with the non-standalone eplex are:

<P>

<UL><LI>Bounds constraints intended for an eplex instance should be posted to
that instance, e.g.

<P>
<PRE>
[eclipse 3]: eplex_instance(instance).
...

[eclipse 4]: instance: eplex_solver_setup(min(X)), 
        instance: (X:: 0.0..10.0), instance: eplex_solve(C).

X = X{0.0 .. 10.0 @ 0.0}
C = 0.0
Yes (0.00s cpu)
</PRE>

<P>
The ::/2 ($::/2) constraints are treated like other eplex constraints,
 that is, the bounds for the variables are specific to their eplex
 instance. Other eplex instances (and indeed any other bounds-keeping
 solver) can have different and even incompatible bounds set for the same
 variable. Also, if the variable(s) do not already occur in the eplex
 instance, they will be added. Both of these are different from the
 non-standalone eplex, where bound constraints were treated
 separately from the eplex constraints.

<P>
Like other eplex constraints, inconsistency within the same eplex instance
 will lead to failure, i.e. if the upper bound of a variable becomes
 smaller than its lower bound, this will result in failure, either
 immediately or when the solver is invoked.

<P>
One potential problem is that with the non-standalone eplex, the bound
keeper's <code>::/2</code> was re-exported through the eplex module (but not
through the eplex instances). One was able to write 'eplex: (X ::
1.0..2.0)' and affect the bounds of the variable for <I>all instances</I>,
even though this was not posting a constraint to any eplex instance.
With the standalone eplex, the same code, <code>eplex: (X :: 1.0..2.0)</code> has
different semantics and <I>is</I> a constraint for the eplex instance
<code>eplex</code> only. 

<P>
A variable never becomes ground as a result of an eplex instance bound
constraint, even when the upper and lower bounds are identical. 

<P>
Posting eplex arithmetic constraints involving one variable is the
same as posting a bounds constraint. Unlike the non-standalone eplex, the
variable will be added to the eplex instance even if it does not occur in
any other constraints.

<P>
No propagation of the bounds is performed at the ECLiPSe level: the bounds
are simply passed on to the external solver. In general, the external
solver also does not do any bounds propagation that may be implied by the
other constraints in the eplex instance. 

<P>
Note that the generic <A NAME="tex2html269"
 HREF="../bips/kernel/termmanip/get_var_bounds-3.html">get_var_bounds/3</A><A NAME="3297"></A> and <A NAME="tex2html271"
 HREF="../bips/kernel/termmanip/set_var_bounds-3.html">set_var_bounds/3</A><A NAME="3300"></A>
applies to <I>all</I> the eplex instances/solver states. If these predicates
are called, then failure will occur if the bounds are inconsistent between
the eplex instances.

<P>

<LI><A NAME="tex2html273"
 HREF="../bips/lib/eplex/integers-1.html">integers/1</A><A NAME="3303"></A> only indicates that a
variable should be treated as an integer by the external solver in the
eplex instance, but does not impose the integer type on the variable. 
In addition, the type of the solution returned for a variable is determined
only by if it was in an <TT>integers/1</TT> declaration for the eplex instance.
(In non-standalone eplex, the type is determined by the type given the
variable by the bounds keeper)

<P>

<LI>If a bounds keeper like lib(ic) is loaded, then any bounds
constraints posted to this solver are <I>not</I> automatically visible to
the eplex instances. Instead, the bounds can be transferred explicitly by
the user (e.g. by calling the eplex instance bounds constraints when the
bounds in the solver changes). To allow for more compatibility with the
other versions of eplex, the <code>sync_bounds(yes)</code> option can be
specified during solver setup (using <A NAME="tex2html275"
 HREF="../bips/lib/eplex/eplex_solver_setup-4.html">eplex_solver_setup/4</A><A NAME="3306"></A>). This will `synchronise' the bounds of all problem
variables when the external solver is invoked, by calling
<code>get_var_bounds/3</code> for all problem variables. Note that it is the generic
get bounds handler that is called. 

<P>

<LI>When a demon solver is invoked, the update to the objective 
variable is via an update to its bounds. In the standalone eplex, this is
done by calling the generic <code>set_var_bounds/3</code>. However, if there are
no bounds on this variable, the update will be lost. A warning is given
during the setup of the demon if the objective variable has no bounds. 

<P>
One possible solution is to add the objective variable to the problem
(e.g. by giving it bounds for the eplex instance). However, this can induce
extra `self-waking' that needlessly invokes the solver (e.g. if the bounds
trigger option is used). Another solution is to add bounds to the variable
via some other bounds keeper, e.g. <code>lib(ic)</code>. Note that it is always
possible to retrieve the objective value via the <code>objective</code> option of
<A NAME="tex2html277"
 HREF="../bips/lib/eplex/eplex_get-2.html">eplex_get/2</A><A NAME="3309"></A>.

<P>

<LI>When a constraint is posted to an eplex instance after solver setup,
that constraint is immediately added to the external solver, rather than
only `collected' by the external solver when it is invoked. 

<P>

<LI>The solver setup predicates have been simplified in that the
suspension priority is no longer specified via an argument, so these
predicates have one less argument:
<A NAME="tex2html279"
 HREF="../bips/lib/eplex/eplex_solver_setup-4.html">eplex_solver_setup/4</A><A NAME="3312"></A>,
<A NAME="tex2html281"
 HREF=".">lp_demon_setup/5</A><A NAME="3315"></A> Instead, the priority can be specified as an option, if
required. The older predicates with the priority argument are still
available for compatibility purposes.

<LI><A NAME="tex2html283"
 HREF="../bips/lib/eplex/eplex_get-2.html">eplex_get/2</A><A NAME="3318"></A> and <A NAME="tex2html285"
 HREF="../bips/lib/eplex/lp_get-3.html">lp_get/3</A><A NAME="3321"></A> now has an extra option:
<code>standalone</code> which returns the value <code>yes</code> for standalone eplex
and <code>no</code> otherwise.

<P>

<LI>The order in which variables are passed to the external solver has
  changed. Also, with standalone eplex there may be more variables in the
  problem. This should not be visible to the user, except when examining a
  problem written out by the external solver. This makes it difficult to
  compare problems generated using standalone eplex and non-standalone
  eplex. Using the <code>use_var_names(yes)</code> options in setup should make
  this somewhat easier as the variables would have the same names.

<P>

</UL>

<P>

<HR>
<!--Navigation Panel-->
<A NAME="tex2html822"
 HREF="node34.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next_motif.gif"></A> 
<A NAME="tex2html818"
 HREF="node32.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up_motif.gif"></A> 
<A NAME="tex2html814"
 HREF="node32.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="previous_motif.gif"></A>  
<A NAME="tex2html820"
 HREF="node34.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index_motif.gif"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html823"
 HREF="node34.html">Index</A>
<B> Up:</B> <A NAME="tex2html819"
 HREF="node32.html">Porting to Standalone Eplex</A>
<B> Previous:</B> <A NAME="tex2html815"
 HREF="node32.html">Porting to Standalone Eplex</A>
 &nbsp <B>  <A NAME="tex2html821"
 HREF="node34.html">Index</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
<I>Warwick Harvey <BR>
2005-01-25</I>
</ADDRESS>
</BODY>
</HTML>
