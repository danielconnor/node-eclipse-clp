<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!--Converted with LaTeX2HTML 98.2 beta5 (July 28th, 1998)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Constraint Predicates</TITLE>
<META NAME="description" CONTENT="Constraint Predicates">
<META NAME="keywords" CONTENT="obsman">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<LINK REL="STYLESHEET" HREF="obsman.css">
<LINK REL="next" HREF="node5.html">
<LINK REL="previous" HREF="node3.html">
<LINK REL="up" HREF="node2.html">
<LINK REL="next" HREF="node5.html">
</HEAD>
<BODY >
<!--Navigation Panel-->
<A NAME="tex2html437"
 HREF="node5.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next_motif.gif"></A> 
<A NAME="tex2html433"
 HREF="node2.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up_motif.gif"></A> 
<A NAME="tex2html427"
 HREF="node3.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="previous_motif.gif"></A>  
<A NAME="tex2html435"
 HREF="node34.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index_motif.gif"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html438"
 HREF="node5.html">Arithmetic Constraint Predicates</A>
<B> Up:</B> <A NAME="tex2html434"
 HREF="node2.html">The Finite Domains Library</A>
<B> Previous:</B> <A NAME="tex2html428"
 HREF="node3.html">Terminology</A>
 &nbsp <B>  <A NAME="tex2html436"
 HREF="node34.html">Index</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION00220000000000000000">
Constraint Predicates</A>
</H1>
<DL>
<DT>
<DD><A NAME="tex2html7"
 HREF="../bips/lib/fd/NN-2.html">?Vars :: ?Domain</A><A NAME="1154"></A> 
<BR>
<A NAME="318"></A>
<A NAME="319"></A>
<I>Vars</I> is a variable or a list of variables
with the associated domain <I>Domain</I>.
<I>Domain</I> can be a closed integer interval denoted as <I>Min .. Max</I>,
or a list of intervals and/or atomic or ground elements.
Although the domain can contain any compound terms that contain
no variable,
the functor <I>../2</I> is reserved to denote integer intervals
and thus <I>1..10</I> always means an interval and <I>a..b</I>
is not accepted as a compound domain element.

<P>
If <I>Vars</I> is already a domain variable, its domain will be updated
according to the new domain; if it is instantiated, the predicate checks
if the value lies in the domain.
Otherwise, if <I>Vars</I> is a free variable, it is converted to a domain
variable.
If <I>Vars</I> is a domain variable and <I>Domain</I> is free,
it is bound to the list of elements and integer intervals
representing the domain of the variable
(see also <A NAME="tex2html11"
 HREF="../bips/lib/fd/dvar_domain-2.html">dvar_domain/2</A><A NAME="1157"></A> which returns the actual domain).

<P>
When a free variable obtains a finite domain or when the domain
of a domain variable is updated, the <B>constrained</B>
list of its <B>suspend</B> attribute is woken, if it has one.
<A NAME="335"></A>

<P>
<DT>
<DD><A NAME="tex2html14"
 HREF="../bips/lib/fd/integers-1.html">integers(+Vars)</A><A NAME="1160"></A> 
<BR>
<A NAME="339"></A>
This constrains the list of variables Vars to have integer domains. Any
non-domain variables in Vars will be given the default integer domain.

<P>
<DT>
<DD><A NAME="tex2html17"
 HREF="../bips/lib/fd/NN-3.html">::(?Var, ?Domain, ?B)</A><A NAME="1163"></A> 
<BR>
<A NAME="343"></A>
<I>B</I> is equal to 1 iff the domain of the finite domain variable <I>Var</I>
is a subset of <I>Domain</I> and 0 otherwise.

<P>
<DT>
<DD><A NAME="tex2html20"
 HREF="../bips/lib/fd/atmost-3.html">atmost(+Number, ?List, +Val)</A><A NAME="1166"></A> 
<BR>
<A NAME="350"></A>
At most <I>Number</I> elements of the list <I>List</I> of domain variables
and ground terms are equal to the ground value <I>Val</I>.

<P>
<DT>
<DD><A NAME="tex2html23"
 HREF="../bips/lib/fd/constraints_number-2.html">constraints_number(+DVar, -Number)</A><A NAME="1169"></A> 
<BR>
<A NAME="357"></A>
<I>Number</I> is the number of constraints and suspended goals
currently attached to the variable <I>DVar</I>.
Note that this number may not correspond to the exact number
of <I>different</I> constraints attached to <I>DVar</I>, as goals
in different suspending lists are counted separately.
This predicate is often used when looking for the most or least constrained
variable from a set of domain variables (see also <A NAME="tex2html26"
 HREF="../bips/lib/fd/deleteffc-3.html">deleteffc/3</A><A NAME="1172"></A>).

<P>
<DT>
<DD><A NAME="tex2html28"
 HREF="../bips/lib/fd/element-3.html">element(?Index, +List, ?Value)</A><A NAME="1175"></A> 
<BR>
<A NAME="367"></A>
The <I>Index</I>'th element of the ground list <I>List</I>
is equal to <I>Value</I>.
<I>Index</I> and <I>Value</I> can be either plain variables,
in which case a domain will be associated to them, or domain variables.
Whenever the domain of <I>Index</I> or <I>Value</I> is updated,
the predicate is woken and the domains are updated accordingly.

<P>
<DT>
<DD><A NAME="tex2html31"
 HREF="../bips/lib/fd/fd_eval-1.html">fd_eval(+E)</A><A NAME="1178"></A> 
<BR>
<A NAME="378"></A>
The constraint expression <I>E</I> is evaluated on runtime
and no compile-time processing is performed.
This might be necessary in the situations where the
default compile-time transformation of the given expression
is not suitable, e.g. because it would require type or mode information.

<P>
<DT>
<DD><A NAME="tex2html34"
 HREF="../bips/lib/fd/indomain-1.html">indomain(+DVar)</A><A NAME="1181"></A> 
<BR>
<A NAME="383"></A>
This predicate instantiates the domain variable <I>DVar</I> to 
an element of its domain; on backtracking the subsequent values are taken.
It is used, for example, to find a value of <I>DVar</I> which is consistent
with all currently imposed constraints.
If <I>DVar</I> is a ground term, it succeeds.
Otherwise, if it is not a domain variable, an error is raised.

<P>
<DT>
<DD><A NAME="tex2html37"
 HREF="../bips/lib/fd/is_domain-1.html">is_domain(?Term)</A><A NAME="1184"></A> 
<BR>
<A NAME="390"></A>
Succeeds if <I>Term</I> is a domain variable.

<P>
<DT>
<DD><A NAME="tex2html40"
 HREF="../bips/lib/fd/is_integer_domain-1.html">is_integer_domain(?Term)</A><A NAME="1187"></A> 
<BR>
<A NAME="395"></A>
Succeeds if <I>Term</I> is an integer domain variable.

<P>
<DT>
<DD><A NAME="tex2html43"
 HREF="../bips/lib/fd/min_max-2.html">min_max(+Goal, ?C)</A><A NAME="1190"></A> 
<BR>
<A NAME="400"></A>
If <I>C</I> is a linear term,
a solution of the goal <I>Goal</I> is found that minimises the
value of <I>C</I>.
If <I>C</I> is a list of linear terms, the returned solution
minimises the maximum value of terms in the list.
The solution is found using the <I>branch and bound</I> method;
as soon as a partial solution is found that is worse than a previously
found solution, failure is forced and a new solution is searched for.
When a new better solution is found, the bound is updated and
the search restarts from the beginning.
Each time a new better solution is found, the event 280 is raised.
If a solution does not make <I>C</I> ground, an error is raised,
unless exactly one variable in the list <I>C</I> remains free,
in which case the system tries to instantiate it to its minimum.

<P>
<DT>
<DD><A NAME="tex2html46"
 HREF="../bips/lib/fd/minimize-2.html">minimize(+Goal, ?Term)</A><A NAME="1193"></A> 
<BR>
<A NAME="411"></A>
Similar to <A NAME="tex2html49"
 HREF="../bips/lib/fd/min_max-2.html">min_max/2</A><A NAME="1196"></A>, but <I>Term</I> must be an integer domain variable.
When a new better solution is found, the search does not restart
from the beginning, but a failure is forced and the search continues.
Each time a new better solution is found, the event 280 is raised.
Often <A NAME="tex2html51"
 HREF="../bips/lib/fd/minimize-2.html">minimize/2</A><A NAME="1199"></A> is faster than <A NAME="tex2html53"
 HREF="../bips/lib/fd/min_max-2.html">min_max/2</A><A NAME="1202"></A>, sometimes
<A NAME="tex2html55"
 HREF="../bips/lib/fd/min_max-2.html">min_max/2</A><A NAME="1205"></A> might run faster, but it is difficult to predict 
which one is more appropriate for a given problem.

<P>
<DT>
<DD><A NAME="tex2html57"
 HREF="../bips/lib/fd/min_max-4.html">min_max(+Goal, ?Template, ?Solution, ?C)</A><A NAME="1208"></A>
<DT>
<DD><A NAME="tex2html59"
 HREF="../bips/lib/fd/minimize-4.html">minimize(+Goal, ?Template, ?Solution, ?Term)</A><A NAME="1211"></A> 
<BR>
<A NAME="427"></A>
<A NAME="428"></A>
Similar to <A NAME="tex2html63"
 HREF="../bips/lib/fd/min_max-2.html">min_max/2</A><A NAME="1214"></A>
and <A NAME="tex2html65"
 HREF="../bips/lib/fd/minimize-2.html">minimize/2</A><A NAME="1217"></A>,
but the variables in <I>Goal</I> do not get
instantiated to their optimum solutions. Instead, <I>Solutions</I> will
be unified with a copy of <I>Template</I> where the variables are replaced
with their minimized values.  Typically, the template will contain
all or a subset of <I>Goal</I>'s variables.

<P>
<DT>
<DD><A NAME="tex2html67"
 HREF="../bips/lib/fd/min_max-5.html">min_max(+Goal, ?C, +Low, +High, +Percent)</A><A NAME="1220"></A>
<DT>
<DD><A NAME="tex2html69"
 HREF="../bips/lib/fd/minimize-5.html">minimize(+Goal, ?Term, +Low, +High, +Percent)</A><A NAME="1223"></A> 
<BR>
<A NAME="443"></A>
<A NAME="444"></A>
Similar to <A NAME="tex2html73"
 HREF="../bips/lib/fd/min_max-2.html">min_max/2</A><A NAME="1226"></A>
and <A NAME="tex2html75"
 HREF="../bips/lib/fd/minimize-2.html">minimize/2</A><A NAME="1229"></A>,
however the branch and bound method
starts with the assumption that the value to be minimised is less than
or equal to <I>High</I>.
Moreover, as soon as a solution is found
whose minimised value is less than <I>Low</I>, this solution is returned.
Solutions within the range of <I>Percent</I> % are considered
equivalent and so the search for next better solution starts
with a minimised value <I>Percent</I> % less than the previously found one.
<I>Low</I>, <I>High</I> and <I>Percent</I> must be integers.

<P>
<DT>
<DD><A NAME="tex2html77"
 HREF="../bips/lib/fd/min_max-6.html">min_max(+Goal, ?C, +Low, +High, +Percent, +Timeout)</A><A NAME="1232"></A>
<DT>
<DD><A NAME="tex2html79"
 HREF="../bips/lib/fd/minimize-6.html">minimize(+Goal, ?Term, +Low, +High, +Percent, +Timeout)</A><A NAME="1235"></A> 
<BR>
<A NAME="462"></A>
<A NAME="463"></A>
Similar to <A NAME="tex2html83"
 HREF="../bips/lib/fd/min_max-5.html">min_max/5</A><A NAME="1238"></A>
and <A NAME="tex2html85"
 HREF="../bips/lib/fd/minimize-5.html">minimize/5</A><A NAME="1241"></A>,
but after <I>Timeout</I> seconds
the search is aborted and the best solution found so far is
returned.

<P>
<DT>
<DD><A NAME="tex2html87"
 HREF="../bips/lib/fd/min_max-8.html">min_max(+Goal, ?Template, ?Solution, ?C, +Low, +High, +Percent, +Timeout)</A><A NAME="1244"></A>
<DT>
<DD><A NAME="tex2html89"
 HREF="../bips/lib/fd/minimize-8.html">minimize(+Goal, ?Template, ?Solution, ?Term, +Low, +High, +Percent, +Timeout)</A><A NAME="1247"></A> 
<BR>
<A NAME="475"></A>
<A NAME="476"></A>
The most general variants of the above, with all the optinal parameters.

<P>
</DL>

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html437"
 HREF="node5.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next_motif.gif"></A> 
<A NAME="tex2html433"
 HREF="node2.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up_motif.gif"></A> 
<A NAME="tex2html427"
 HREF="node3.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="previous_motif.gif"></A>  
<A NAME="tex2html435"
 HREF="node34.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index_motif.gif"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html438"
 HREF="node5.html">Arithmetic Constraint Predicates</A>
<B> Up:</B> <A NAME="tex2html434"
 HREF="node2.html">The Finite Domains Library</A>
<B> Previous:</B> <A NAME="tex2html428"
 HREF="node3.html">Terminology</A>
 &nbsp <B>  <A NAME="tex2html436"
 HREF="node34.html">Index</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
<I>Warwick Harvey <BR>
2005-01-25</I>
</ADDRESS>
</BODY>
</HTML>
