<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!--Converted with LaTeX2HTML 98.2 beta5 (July 28th, 1998)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Modules</TITLE>
<META NAME="description" CONTENT="Modules">
<META NAME="keywords" CONTENT="tutorial">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<LINK REL="STYLESHEET" HREF="tutorial.css">
<LINK REL="next" HREF="node12.html">
<LINK REL="previous" HREF="node10.html">
<LINK REL="up" HREF="node6.html">
<LINK REL="next" HREF="node12.html">
</HEAD>
<BODY >
<!--Navigation Panel-->
<A NAME="tex2html501"
 HREF="node12.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next_motif.gif"></A> 
<A NAME="tex2html495"
 HREF="node6.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up_motif.gif"></A> 
<A NAME="tex2html489"
 HREF="node10.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="previous_motif.gif"></A> 
<A NAME="tex2html497"
 HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents_motif.gif"></A> 
<A NAME="tex2html499"
 HREF="node78.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index_motif.gif"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html502"
 HREF="node12.html">Naming schemes</A>
<B> Up:</B> <A NAME="tex2html496"
 HREF="node6.html">High Level Design</A>
<B> Previous:</B> <A NAME="tex2html490"
 HREF="node10.html">High level structure</A>
 &nbsp <B>  <A NAME="tex2html498"
 HREF="node1.html">Contents</A></B> 
 &nbsp <B>  <A NAME="tex2html500"
 HREF="node78.html">Index</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsections</STRONG></A>

<UL>
<LI><A NAME="tex2html503"
 HREF="node11.html#SECTION00351000000000000000">Making predicates available</A>
<LI><A NAME="tex2html504"
 HREF="node11.html#SECTION00352000000000000000">Using packaged functionality</A>
</UL>
<!--End of Table of Child-Links-->
<HR>

<H1><A NAME="SECTION00350000000000000000">
Modules</A>
</H1>
We now have an idea of the overall structure of our application and can now turn this into the top-level code structure. We use the module concept of ECLiPSe to clearly separate the components and to define fixed interfaces between them. Each component of our top-level structure should define a module in one file. We place a <I>module</I><A NAME="263"></A> directive at the beginning of the file to indicate the module name. 

<P>
The following examples are taken from the file <I>flow_prepare_data.ecl</I><A NAME="265"></A>.
<PRE>
:-module(flow_prepare_data).
</PRE>

<P>

<H2><A NAME="SECTION00351000000000000000">
Making predicates available</A>
</H2>
The <I>export</I><A NAME="270"></A> directive makes some predicate definition available to users outside the module. All other predicates can be only used inside the module, but cannot be used from outside. A module effectively hides all non exported predicates in a separate name space<A NAME="271"></A>, so that we do not have to worry about using the same name in two different modules. 

<P>
In our example, the module exports a single predicate <I>prepare_data/12</I><A NAME="273"></A>.
<PRE>
:-export(prepare_data/12).
</PRE>

<P>

<H2><A NAME="SECTION00352000000000000000">
Using packaged functionality</A>
</H2>
If we want to use some function which has been exported from some module in another module, we have to use the <I>use_module</I><A NAME="278"></A> directive. It says that all exported predicates of a module should be available in the current module, and ensures that the module is loaded into the system. We can use the same module in more than one place, but the directive makes sure it is loaded only once. The <I>use_module</I> directive assumes that the module is defined in a file in the current directory, which has the same name as the module. 

<P>
The <I>flow_prepare_data</I> module uses predicates from a variety of sources.
<PRE>
:-use_module(data_topology).
:-use_module(data_peering_policy).
:-use_module(data_traffic).
:-use_module(data_routing).
:-use_module(data_group).
:-use_module(data_general).

:-use_module(flow_statistics).
:-use_module(flow_structures).
:-use_module(flow_utility).
:-use_module(report).
:-use_module(report_utility).
:-use_module(utility).
</PRE>

<P>
If we want to use predicates defined in some library, we have to use the <I>lib</I><A NAME="284"></A><A NAME="285"></A> directive. It loads the library from the library directory in the ECLiPSe installation, unless we have changed the library path setting to include other directories in the search path.
Libraries in ECLiPSe are modules like all others, they are just stored in a different place in the file system.

<P>
In our example, a single library called ``hash'' is loaded.
<PRE>
:-lib(hash).
</PRE>

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html501"
 HREF="node12.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next_motif.gif"></A> 
<A NAME="tex2html495"
 HREF="node6.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up_motif.gif"></A> 
<A NAME="tex2html489"
 HREF="node10.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="previous_motif.gif"></A> 
<A NAME="tex2html497"
 HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents_motif.gif"></A> 
<A NAME="tex2html499"
 HREF="node78.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index_motif.gif"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html502"
 HREF="node12.html">Naming schemes</A>
<B> Up:</B> <A NAME="tex2html496"
 HREF="node6.html">High Level Design</A>
<B> Previous:</B> <A NAME="tex2html490"
 HREF="node10.html">High level structure</A>
 &nbsp <B>  <A NAME="tex2html498"
 HREF="node1.html">Contents</A></B> 
 &nbsp <B>  <A NAME="tex2html500"
 HREF="node78.html">Index</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
<I>Warwick Harvey</I>
<BR><I>2005-01-25</I>
</ADDRESS>
</BODY>
</HTML>
