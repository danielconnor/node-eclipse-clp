<HTML><HEAD><TITLE>compile(+File)</TITLE>
</HEAD><BODY>[ <A HREF="index.html">Predicate Database and Compiler</A> | <A HREF="../index.html">The ECLiPSe Built-In Predicates</A> | <A HREF="../../index.html">Reference Manual</A> | <A HREF="../../fullindex.html">Alphabetic Index</A> ]
<H1>compile(+File)</H1>
Compile specified file or list of files File.


<DL>
<DT><EM>+File</EM></DT>
<DD>Atom, structure or string, or a list of them.
</DD>
</DL>
<H2>Description</H2>
   Compiles the specified Prolog source file or list of source files.  The
   atom or string File must be instantiated to a legitimate specification
   for an existing file except for the suffix.
<P>
   The predicate tries to add to it the Prolog suffixes from the list
   specified in the Prolog flag prolog_suffix and look for an existing and
   readable file.  As soon as a file is found which exists, it is taken as
   the input file name.  The default Prolog suffixes are empty suffix,
   .ecl and .pl.
<P>
   If File is of the form library(Name), the predicates looks for the file
   in the directories from the library_path flag.
<P>
   When File is not in the current directory, ECLiPSe first changes the
   current directory to that of the file.  Consequently, recursive
   compile/1 calls inside compiled files can use relative pathnames.  This
   makes it possible to compile the program top files from any directory
   and still use only local file names.  At the end of the compilation, the
   current directory is changed back to the initial one.  This has the side
   effect that all calls to cd/1 in queries in the compiled file are
   ignored.
<P>
   Compiling a file which contains a module/1 or module/3 directive
   completely redefines an existing module of the same name.  Otherwise,
   static procedures are redefined by those occurring in the compiled file,
   the clauses of dynamic procedures are appended to the existing ones.  To
   add new procedures to an existing module without erasing the whole
   module the predicate compile/2 is to be used.
<P>
   Note that the alternative notation [File1, File2, ...  , FileN] may be
   used instead of compile([File1, File2,...  , FileN]).

<P>
   In addition to the exceptions listed below, any exception can occur during
   compilation, because general code may be executed in directives (:-/2), file
   queries (?-/2), macro transformations and inline expansion code.

<H3>Fail Conditions</H3>
   None.


<H3>Resatisfiable</H3>
   No.
<H3>Exceptions</H3>
<DL>
<DT><EM>(4) instantiation fault </EM>
<DD>File is not instantiated.
<DT><EM>(5) type error </EM>
<DD>File is instantiated, but not to an atom or string, or a list of atoms or strings.
<DT><EM>(61) inconsistent tool redefinition </EM>
<DD>A predicate that was already defined is later declared to be a tool.
<DT><EM>(62) inconsistent procedure redefinition </EM>
<DD>Illegal attempt to change a predicate's properties like: tool, dynamic, demon, parallel, calling convention.
<DT><EM>(82) trying to access a locked module </EM>
<DD>The module in which the clauses should be compiled is locked.
<DT><EM>(94) trying to redefine an existing imported procedure </EM>
<DD>There is already am imported predicate of the same name.
<DT><EM>(130) syntax error: illegal head </EM>
<DD>The head of a clause is not an atom or a compound term.
<DT><EM>(131) syntax error: illegal goal </EM>
<DD>A subgoal in the body of a clause is not an atom, a compound term or a variable.
<DT><EM>(134) procedure clauses are not consecutive </EM>
<DD>The clauses of a procedure are not consecutive.
<DT><EM>(137) trying to redefine a procedure with another type </EM>
<DD>A procedure which was previously referenced as built-in or external is now defined as a regular one, or vice versa.
<DT><EM>(139) compiled or dumped file message </EM>
<DD>This event is invoked at the end of each compiled file, by default it prints the compilation time and size of compiled code.
<DT><EM>(143) compiled query failed </EM>
<DD>A query in the compiled file has failed. This is by default ignored and the compilation continues.
<DT><EM>(145) procedure being redefined in another file </EM>
<DD>A procedure is being redefined in another file than the original one.
<DT><EM>(147) compilation aborted </EM>
<DD>This event is raised just before a compilation is aborted because of an error.
<DT><EM>(148) bad pragma </EM>
<DD>An unrecognised pragma was used in the code.
<DT><EM>(171) File does not exist :  </EM>
<DD>File does not exist.
</DL>
<H2>Examples</H2>
<PRE>
Success:
   [hanoi].         % compiles the file hanoi.pl

   [eclipse]: sh('cat file1').
   p:-q(hello).
   yes.
   [eclipse]: sh('cat file2').
   q(X) :- writeln(X).
   yes.
   [eclipse]: compile(user), p.
    p :- writeln(hi).
    user compiled 92 bytes in 0.00 seconds
   hi
   yes.
   [eclipse]: compile([file1, file2]), p.
   /home/lp/user/file1 compiled 32 bytes in 0.02 seconds
   /home/lp/user/file2 compiled 92 bytes in 0.00 seconds
   hello
   yes.


   % example showing use of relative pathnames.
   [eclipse]: sh('ls -FR /home/lp/user/pl').
   a.pl        util/

   /home/lp/user/pl/util:
   b.pl        c.pl

   yes.
   [eclipse]: sh('cat /home/lp/user/pl/a.pl').
   :- compile('util/b').
   p.

   yes.
   [eclipse]: compile('/home/lp/user/pl/a').
   /home/lp/user/pl/util/b.pl compiled 92 bytes in 0.00 seconds
   /home/lp/user/pl/a.pl compiled 28 bytes in 0.00 seconds
   yes.

Error:
   compile(F).            (Error 4).
   compile(file1/1).      (Error 5).
   compile(file).         (Error 171).



</PRE>
<H2>See Also</H2>
<A HREF="../../kernel/database/ensure_loaded-1.html">ensure_loaded / 1</A>, <A HREF="../../kernel/database/compile-2.html">compile / 2</A>, <A HREF="../../kernel/database/D-2.html">. / 2</A>, <A HREF="../../kernel/database/compile_stream-1.html">compile_stream / 1</A>, <A HREF="../../kernel/database/compile_term-1.html">compile_term / 1</A>, <A HREF="../../kernel/database/lib-1.html">lib / 1</A>, <A HREF="../../kernel/env/set_flag-2.html">set_flag / 2</A>, <A HREF="../../kernel/modules/use_module-1.html">use_module / 1</A>, <A HREF="../../kernel/directives/pragma-1.html">pragma / 1</A>, <A HREF="../../lib/fcompile/fcompile-1.html">fcompile : fcompile / 1</A>
</BODY></HTML>
