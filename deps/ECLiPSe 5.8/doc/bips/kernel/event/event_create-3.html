<HTML><HEAD><TITLE>event_create(+Goal, +Options, -EventHandle)</TITLE>
</HEAD><BODY>[ <A HREF="index.html">Event Handling</A> | <A HREF="../index.html">The ECLiPSe Built-In Predicates</A> | <A HREF="../../index.html">Reference Manual</A> | <A HREF="../../fullindex.html">Alphabetic Index</A> ]
<H1>event_create(+Goal, +Options, -EventHandle)</H1>
Create an ECLiPSe event from an arbitrary goal.
<DL>
<DT><EM>Goal</EM></DT>
<DD>An arbitrary goal
</DD>
<DT><EM>Options</EM></DT>
<DD>A list of atoms.
</DD>
<DT><EM>EventHandle</EM></DT>
<DD>A free variable
</DD>
</DL>
<H2>Description</H2>
	This creates an event from the goal provided, which can be raised 
	with the standard event handling predicates (e.g. event / 1, event_after / 2
	and event_after_every / 2) using the associated handle.
    <P>
	The event creation requires non-logical copying of the goal.
	As a result, if the goal contains variables, they lose their identity 
	and are replaced with fresh ones.
    <P>
	The intended use of such events are for localised event handling
	or when it is necessary to pass ground parameters to the event goal,
	i.e. when the use of a global event handler is unnecessary or does not suffice.
    <P>
	It should be noted that the event handle is the only way to uniquely
	identify a given event.  E.g. if an event has been scheduled as an
	after-event (using event_after/3 or events_after/2), it can only be
	cancelled by invoking cancel_after_event/2 with the correct handle.
    <P>
        The following options are recognised:
	<DL>
	<DT><B>defers</B></DT>
	    <DD>Give the event the defers-property.  This means that event
	    handling is automatically deferred on entering the event's handler,
	    thus preventing other events from interrupting the handler.
	    Such handlers must always explicitly invoke events_nodefer/0
	    before exiting in order to reenable event handling.</DD>
	</DL>
    
<H3>Fail Conditions</H3>
None
<H3>Resatisfiable</H3>
No
<H3>Exceptions</H3>
<DL>
<DT><EM>(4) instantiation fault </EM>
<DD>Goal is not instantiated
<DT><EM>(5) type error </EM>
<DD>Goal is not a valid goal
<DT><EM>(5) type error </EM>
<DD>EventHandle is not a free variable
<DT><EM>(5) type error </EM>
<DD>Options is not a list of atoms
<DT><EM>(6) out of range </EM>
<DD>Some element of Options is not a valid option
</DL>
<H2>Examples</H2>
<PRE>    % Create and raise a single event
    ?-  event_create(writeln('Goodbye cruel world!'), [], Event),
    	writeln('Hello world!'),
	event(Event).
    Hello world!
    Goodbye cruel world!
    Event = 'EVENT'(16'503f0238)
    Yes (0.00s cpu)


    % Raise events via a timer
    ?-  event_create(writeln('e1'), [], E1Event),
	event_create(writeln('e2'), [], E2Event),
    	events_after([E1Event-every(0.2), E2Event-0.5]),
    	repeat, fail.
    e1
    e1
    e2
    e1
    e1
    ^C
    interruption: type a, b, c, e, or h for help : ? e1
    abort
    Aborting execution ...


    % By default, event handlers are allowed to interrupt each other,
    % which can make it seem that they are handled in reverse order:
    ?-  event_create(writeln('e1'), [], E1Event),
	event_create(writeln('e2'), [], E2Event),
	event([E1Event,E2Event]).	% raise both events together
    e2
    e1
    E1Event = 'EVENT'(16'ed9b0010)
    E2Event = 'EVENT'(16'ed770b20)
    Yes (0.00s cpu)


    % By default, event handlers are allowed to interrupt each other,
    % which can make it seem that they are handled in reverse order:
    ?-  event_create((writeln('e1'),events_nodefer), [defers], E1Event),
	event_create((writeln('e2'),events_nodefer), [defers], E2Event),
	event([E1Event,E2Event]).	% raise both events together
    e1
    e2
    E1Event = 'EVENT'(16'ed9b0010)
    E2Event = 'EVENT'(16'ed770b20)
    Yes (0.00s cpu)
    </PRE>
<H2>See Also</H2>
<A HREF="../../kernel/event/event_retrieve-3.html">event_retrieve / 3</A>, <A HREF="../../kernel/event/event-1.html">event / 1</A>, <A HREF="../../kernel/event/event_after-2.html">event_after / 2</A>, <A HREF="../../kernel/event/event_after-3.html">event_after / 3</A>, <A HREF="../../kernel/event/event_after_every-2.html">event_after_every / 2</A>, <A HREF="../../kernel/event/set_event_handler-2.html">set_event_handler / 2</A>, <A HREF="../../kernel/event/current_after_events-1.html">current_after_events / 1</A>, <A HREF="../../kernel/event/cancel_after_event-2.html">cancel_after_event / 2</A>, <A HREF="../../kernel/typetest/is_event-1.html">is_event / 1</A>, <A HREF="../../kernel/event/events_nodefer-0.html">events_nodefer / 0</A>
</BODY></HTML>
