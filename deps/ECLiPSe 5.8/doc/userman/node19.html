<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!--Converted with LaTeX2HTML 98.2 beta5 (July 28th, 1998)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Using the development tools in applications</TITLE>
<META NAME="description" CONTENT="Using the development tools in applications">
<META NAME="keywords" CONTENT="umsroot">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<LINK REL="STYLESHEET" HREF="umsroot.css">
<LINK REL="previous" HREF="node18.html">
<LINK REL="up" HREF="node17.html">
<LINK REL="next" HREF="node20.html">
</HEAD>
<BODY >
<!--Navigation Panel-->
<A NAME="tex2html2514"
 HREF="node20.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next_motif.gif"></A> 
<A NAME="tex2html2510"
 HREF="node17.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up_motif.gif"></A> 
<A NAME="tex2html2506"
 HREF="node18.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="previous_motif.gif"></A>  
<A NAME="tex2html2512"
 HREF="node158.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index_motif.gif"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html2515"
 HREF="node20.html">ECLiPSe-specific Language Features</A>
<B> Up:</B> <A NAME="tex2html2511"
 HREF="node17.html">The TkECLiPSe Development Tools</A>
<B> Previous:</B> <A NAME="tex2html2507"
 HREF="node18.html">Display Matrix</A>
 &nbsp <B>  <A NAME="tex2html2513"
 HREF="node158.html">Index</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsections</STRONG></A>

<UL>
<LI><A NAME="tex2html2516"
 HREF="node19.html#SECTION00421000000000000000">Using the Development tools in the Tcl/Tk Embedding Interface</A>
<LI><A NAME="tex2html2517"
 HREF="node19.html#SECTION00422000000000000000">Using the Remote Development Tools</A>
<UL>
<LI><A NAME="tex2html2518"
 HREF="node19.html#SECTION00422100000000000000">Starting Remote Tools</A>
</UL></UL>
<!--End of Table of Child-Links-->
<HR>

<H1><A NAME="SECTION00420000000000000000">
Using the development tools in applications</A>
</H1>

<P>
The user can develop their own ECLiPSe applications using the
development tools independent of the TkECLiPSe toplevel. There are two
ways to do this, depending on if the user is also using the embedding Tcl/Tk
interface (see the Embedding and Interfacing Manual) to provide a graphical
front end:

<P>

<UL><LI>The user is using the embedding Tcl/Tk interface, and is thus
developing a graphical front end in Tk. In this case the user can use the
 development tools via the embedding interface. This is described in
 section&nbsp;<A HREF="node19.html#embedtools">4.2.1</A>. 

<LI>The user is not using the embedding Tcl/Tk interface. In this case
 the user can use the development tools remotely, by using the remote_tools
 library. This is described in section&nbsp;<A HREF="node19.html#useremotetools">4.2.2</A>.

</UL>

<P>

<H2><A NAME="SECTION00421000000000000000"></A>
<A NAME="embedtools"></A>
<BR>
Using the Development tools in the Tcl/Tk Embedding Interface
</H2>

<P>
The development tool suite was
designed to be independent of the TkECLiPSe top-level so that they can be
used in a user's application. In effect, the user can replace the
TkECLiPSe
top-level with their own alternative top-level. Two simple examples in
which this is done are provided in the <code>lib_tcl</code> library as
<code>example.tcl</code> and <code>example1.tcl</code>. In addition, <code>tkeclipse</code>
itself, in the file <code>tkeclipse.pl</code>, can be seen as a more complex
example usage of the interface.

<P>
In order to use the Tcl/Tk interface, the system must be initialised as
described in the Embedding manual. In addition, the user's Tcl code should
probably also be provided as a package using Tcl's package facility, in
order to allow the program to run in a different directory. See the
Embedding manual and the example programs for more details on the
initialisation needed. 

<P>
The user should most likely provide a connection for the output stream
of ECLiPSe so that output from ECLiPSe will go somewhere in the GUI. In
addition, especially during the development, it is also useful to connect
the error stream to some window so that errors (such as ECLiPSe
compilation errors) are seen by the user. This can be done using the
<code>ec_queue_connect</code> Tcl command described in the embedding manual.

<P>
Output from ECLiPSe need not be sent to a Tk window directly. The Tcl/Tk
code which receives the output can operate on it before displaying it. It
is intended that all such graphical operations should be performed on the
Tcl side, rather than having some primitives provided on the ECLiPSe side.

<P>
The user can also provide balloon-help to his/her own application. The
balloon help package is part of the Megawidget developed by Jeffrey Hobbs
and used in TkECLiPSe. In order to define a balloon help for a particular
widget, the following Tcl code is needed:

<P>
<PRE>
balloonhelp &lt;path&gt; &lt;text&gt;
</PRE>

<P>
where <code>&lt;path&gt;</code> is the pathname of the widget, and <code>&lt;text&gt;</code> is the
text that the user wants to display in the balloon. 

<P>

<H2><A NAME="SECTION00422000000000000000"></A>
<A NAME="useremotetools"></A>
<BR>
Using the Remote Development Tools
</H2>

<P>
The user can also use the development tools via the remote_tools
library. In this case, the development tools are run as a separate program
from the ECLiPSe session, and is attached to it via the Tcl/Tk remote
interface (see the Embedding and Interfacing Manual). This allows any 
ECLiPSe session to use the development tools,
as long as there is the capability for graphical display. 

<P>
The main purpose for the remote_tools library is to allow the user to 
use the development tools in situations where (s)he cannot use the Tcl/Tk
embedding interface, e.g. if ECLiPSe is already embedded into another
programming language, or if the user needs to use the tty interface for
ECLiPSe. 

<P>

<P></P>
<DIV ALIGN="CENTER"><A NAME="remotetools"></A><A NAME="1800"></A>
<TABLE>
<CAPTION><STRONG>Figure:</STRONG>
Remote Development Tools Toplevel (left: ECLiPSe active; right:
remote tools active)</CAPTION>
<TR><TD>
<DIV ALIGN="CENTER">

<DIV ALIGN="CENTER">
</DIV></DIV><!-- MATH: $\includegraphics{remotetools.eps}$ -->
<IMG
 WIDTH="325" HEIGHT="230" ALIGN="BOTTOM" BORDER="0"
 SRC="img4.gif"
 ALT="\includegraphics{remotetools.eps}">
<DIV ALIGN="CENTER">
<DIV ALIGN="CENTER"> </DIV></DIV><!-- MATH: $\includegraphics{remotetools2.eps}$ -->
<IMG
 WIDTH="325" HEIGHT="230" ALIGN="BOTTOM" BORDER="0"
 SRC="img5.gif"
 ALT="\includegraphics{remotetools2.eps}">
<DIV ALIGN="CENTER">
<DIV ALIGN="CENTER">


</DIV></DIV></TD></TR>
</TABLE>
</DIV><P></P>

<P>
Once attached to an ECLiPSe session, the remote development tools has
its own window as shown in Figure&nbsp;<A HREF="node19.html#remotetools">4.3</A>. The Tools menu is the
same as in TkECLiPSe, providing access to the same suite of development
tools. The main body of the window consists of one button and a status
indicator. The indicator shows wheather the tools can be used or not (the
tools cannot be used when the ECLiPSe is active), and the button
is used to pass control explicitly to ECLiPSe.

<P>
The ECLiPSe session and the development tools are two separate processes
(and in fact they can be running on different machines) that are connected
to each other via the remote Tcl/Tk interface. The interactions of the two
processes are synchronised in that there is a thread-like flow of control
between them: only one process can be `active' at any time. The interaction
is similar to the standard interaction between a debugger and the program
being debugged - debugging commands can only be issued
while the execution of the program is suspended. In the same way, the user
can only interact with the remote tools window when execution in the
ECLiPSe session is suspended. The toplevel window of the remote tools
has an indicator showing which side has control (see Figure&nbsp;<A HREF="node19.html#remotetools">4.3</A>).
To allow ECLiPSe to resume execution, control is transferred back from
the remote tools to ECLiPSe. This can either be
done automatically from the tools (e.g. when one of the debug buttons is
pressed in the tracer tool), or control can be transferred explicitly back
to ECLiPSe via the ``Resume ECLiPSe'' button on the remote tools window.

<P>

<H3><A NAME="SECTION00422100000000000000">
Starting Remote Tools</A>
</H3>

<P>
To use the remote tools, the user must first load the remote_tools library
with <code>lib(remote_tools)</code>. After loading the library, the user can
start the remote tools by
starting the development tools as a separate program and then manually
attach the program to the ECLiPSe session. This allows the development
tools to be run on a different machine from the ECLiPSe session. In this
case, the user initiates the attachment in ECLiPSe with
<A NAME="tex2html148"
 HREF="../bips/lib/remote_tools/attach_tools-0.html">attach_tools/0</A><A NAME="1813"></A>:

<P>
<PRE>
[eclipse 2]: attach_tools.
Socket created at address holborn.icparc.ic.ac.uk/22849
</PRE>

<P>
ECLiPSe prints the host and port address it expects the remote tools to
attach to, and execution is now suspended waiting for the remote tools to
attach. This is done by running the <B>tktools</B> program, which is located
with the other ECLiPSe executables. As stated, this program can be run
on a different machine from the ECLiPSe session, as long as the two are
connected via a network such as the internet. A connection window is then
displayed as shown:

<P>
<DIV ALIGN="CENTER">
</DIV><!-- MATH: $\includegraphics{remotecon.eps}$ -->
<IMG
 WIDTH="457" HEIGHT="255" ALIGN="BOTTOM" BORDER="0"
 SRC="img6.gif"
 ALT="\includegraphics{remotecon.eps}">
<DIV ALIGN="CENTER">
</DIV>

<P>
The same `host' and `port' fields as printed by the ECLiPSe session should 
be entered. The default `host' field is `localhost'. This will work if the
remote tools are ran on the same machine as the ECLiPSe
session. Otherwise the full name of the `host' as given by <B>attach_tools/0</B> needs to be entered:

<P>
<DIV ALIGN="CENTER">
</DIV><!-- MATH: $\includegraphics{remotecon2.eps}$ -->
<IMG
 WIDTH="457" HEIGHT="255" ALIGN="BOTTOM" BORDER="0"
 SRC="img7.gif"
 ALT="\includegraphics{remotecon2.eps}">
<DIV ALIGN="CENTER">
</DIV>

<P>
Typing return in the `port' field will start the attachment, and with
success, the remote tools window (see Figure&nbsp;<A HREF="node19.html#remotetools">4.3</A>) will be
displayed. The <B>attach_tools/0</B> predicate will also return.

<P>
The user is not able to immediately interact directly with the remote
tools, as the ECLiPSe session is initially given control. The user can
use the ECLiPSe session as normal, with the additional availability of
the development tools. For example, the display matrix predicates can be
used as in TkECLiPSe. Also, the tracer tool replaces the previous
tracing facilities of the ECLiPSe session (this would typically be the
command-line debugger).

<P>
The tools can be triggered by events in the ECLiPSe session as described
above. In order to use the tools in a more interactive way, control should
be handed over to the remote tools. This can be done by calling the
<A NAME="tex2html150"
 HREF="../bips/lib/remote_tools/tools-0.html">tools/0</A><A NAME="1816"></A> predicate. When the remote tools have control, the user can
now interactively select development tools from the Tools menu.

<P>
The remote_tools library provides several predicates to facilitate the use
of the remote development tools:

<P>
<DL>
<DT><STRONG><A NAME="1782"></A>tools</STRONG>
<DD>Explicitly hands over control to the remote development
tools. The tools window can then be used interactively. Execution on the
ECLiPSe session is suspended until the remote tools allows ECLiPSe to
resume, at which point the predicate succeeds. The predicate will abort if
the development tools is disconnected from the ECLiPSe session.

<P>
<DT><STRONG><A NAME="1786"></A>attached(?ControlStream)</STRONG>
<DD>Checks if the remote development tools have been attached to this 
        ECLiPSe session or not. If attached, the predicate succeeds and 
        unifies <I>ControlStream</I> with the stream name of the control
        stream. If not attached, th  predicate fails.

<P>
</DL>

<P>
Once attached, the remote development tools should be connected until the
user quits the session. Although it is possible to disconnect the tools
from the ECLiPSe session (from the File menu in the development tools
window). This is not recommended, as there would not be any debugging
facilities available after the disconnection - the original tracer would
not be restored. 

<P>
It is possible to attach the remote development tools to any ECLiPSe
session, including one that is using the embedding Tcl/Tk interface (and
indeed, to TkECLiPSe itself). However, using the tools via the embedding
interface is usually the better option if available, because the tools are
more tightly coupled to ECLiPSe in this case. This means that the
communications between ECLiPSe and the tools are more efficient (and
hence something like the display matrix would perform more efficiently).

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html2514"
 HREF="node20.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next_motif.gif"></A> 
<A NAME="tex2html2510"
 HREF="node17.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up_motif.gif"></A> 
<A NAME="tex2html2506"
 HREF="node18.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="previous_motif.gif"></A>  
<A NAME="tex2html2512"
 HREF="node158.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index_motif.gif"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html2515"
 HREF="node20.html">ECLiPSe-specific Language Features</A>
<B> Up:</B> <A NAME="tex2html2511"
 HREF="node17.html">The TkECLiPSe Development Tools</A>
<B> Previous:</B> <A NAME="tex2html2507"
 HREF="node18.html">Display Matrix</A>
 &nbsp <B>  <A NAME="tex2html2513"
 HREF="node158.html">Index</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
<I>Warwick Harvey</I>
<BR><I>2005-01-25</I>
</ADDRESS>
</BODY>
</HTML>
