<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!--Converted with LaTeX2HTML 98.2 beta5 (July 28th, 1998)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Explicit supension with suspend/3</TITLE>
<META NAME="description" CONTENT="Explicit supension with suspend/3">
<META NAME="keywords" CONTENT="umsroot">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<LINK REL="STYLESHEET" HREF="umsroot.css">
<LINK REL="next" HREF="node112.html">
<LINK REL="previous" HREF="node110.html">
<LINK REL="up" HREF="node105.html">
<LINK REL="next" HREF="node112.html">
</HEAD>
<BODY >
<!--Navigation Panel-->
<A NAME="tex2html3913"
 HREF="node112.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next_motif.gif"></A> 
<A NAME="tex2html3909"
 HREF="node105.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up_motif.gif"></A> 
<A NAME="tex2html3903"
 HREF="node110.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="previous_motif.gif"></A>  
<A NAME="tex2html3911"
 HREF="node158.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index_motif.gif"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html3914"
 HREF="node112.html">Waking conditions</A>
<B> Up:</B> <A NAME="tex2html3910"
 HREF="node105.html">Advanced Control Features</A>
<B> Previous:</B> <A NAME="tex2html3904"
 HREF="node110.html">Declarative Suspension: Delay Clauses</A>
 &nbsp <B>  <A NAME="tex2html3912"
 HREF="node158.html">Index</A></B> 
<BR>
<BR>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION001760000000000000000"></A>
<A NAME="suspend3"></A>
<BR>
Explicit supension with suspend/3
</H1>
While delay-clauses are an elegant, declarative way of specifying how
a program should execute, it is sometimes necessary to be more explicit
about suspension and waking conditions.
The built-in predicate
<A NAME="tex2html1404"
 HREF="../bips/kernel/suspensions/suspend-3.html">suspend/3</A><A NAME="10839"></A>
is provided for this purpose<A NAME="tex2html1403"

HREF="footnode.html#foot10324"><SUP>17.2</SUP></A>.
It allows to explicitly create a suspended goal, specify its priority
and its exact waking conditions.

<P>
When
<BLOCKQUOTE>
<B>suspend(Goal, Prio, CondList)</B>

</BLOCKQUOTE>
is called, <I>Goal</I> will be suspended with priority <I>Prio</I>
and it will wake up
as soon as one of the conditions specified in the <I>CondList</I>
is satisfied.
This list contains specifications of the form
<BLOCKQUOTE>
<B>Vars -&gt; Cond</B>

</BLOCKQUOTE>
to denote that as soon as one of the variables in the term <I>Vars</I>
satisfies the condition <I>Cond</I>, the suspended goal will
be woken and then executed as soon as the program priority allows it.
<I>CondList</I> can also be a single specification.

<P>
The condition <I>Cond</I> can be the name of a system-defined waking condition,
e.g.<PRE>
[X,Y]-&gt;inst
</PRE>
means that as soon as one (or both) of the variables <B>X, Y</B>
is instantiated, the suspended goal will be woken.
<A NAME="10343"></A>
These variables are also called the <I>suspending variables</I> of the goal.

<P>
Cond can also be the specification of a suspension list
defined in one of currently loaded library attributes. E.g. when the
interval solver library lib(ic) is loaded, either of<PRE>
[A,B]-&gt;ic:min
[A,B]-&gt;ic:(min of ic)
</PRE>
triggers the suspended goal as soon as the minimum element
of the domain of either <B>A</B> or <B>B</B> are updated
(see Constraint Library Manual, IC Library).

<P>
Another admissible form of condition <I>Cond</I> is<PRE>
trigger(Name)
</PRE>
which suspends the goal on the global trigger condition <B>Name</B>
(see section&nbsp;<A HREF="node112.html#trigger">17.7.3</A>).

<P>
Using
<A NAME="tex2html1407"
 HREF="../bips/kernel/suspensions/suspend-3.html">suspend/3</A><A NAME="10842"></A>,
we can rewrite our first delay-clause example from above as follows:<PRE>
report_binding(X) :-
        ( var(X) -&gt;
            suspend(report_binding(X), 0, X-&gt;inst)
        ;
            printf("Variable has been bound to %w\n", [X])
).
</PRE>
Here, when the predicate is called with an uninstantiated argument,
we explicitly suspend a goal with the condition that it be woken as
soon as X becomes instantiated. The priority is given as 0, which indicates
the default priority (0 is not a valid priority itself).
Running this code produces the following:<PRE>
?- report_binding(X).
X = X
There is 1 delayed goal.
Yes (0.00s cpu)
</PRE>
When X is later instantiated, it will wake up and print the message:<PRE>
?- report_binding(X), writeln(here), X = 99.
here
Variable has been bound to 99
X = 99
Yes (0.00s cpu)
</PRE>

<P>
<HR>
<!--Navigation Panel-->
<A NAME="tex2html3913"
 HREF="node112.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next_motif.gif"></A> 
<A NAME="tex2html3909"
 HREF="node105.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up_motif.gif"></A> 
<A NAME="tex2html3903"
 HREF="node110.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="previous_motif.gif"></A>  
<A NAME="tex2html3911"
 HREF="node158.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index_motif.gif"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html3914"
 HREF="node112.html">Waking conditions</A>
<B> Up:</B> <A NAME="tex2html3910"
 HREF="node105.html">Advanced Control Features</A>
<B> Previous:</B> <A NAME="tex2html3904"
 HREF="node110.html">Declarative Suspension: Delay Clauses</A>
 &nbsp <B>  <A NAME="tex2html3912"
 HREF="node158.html">Index</A></B> 
<!--End of Navigation Panel-->
<ADDRESS>
<I>Warwick Harvey</I>
<BR><I>2005-01-25</I>
</ADDRESS>
</BODY>
</HTML>
